<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="copyright" title="Copyright" href="../../copyright.html" /><link rel="next" title="Curation" href="2_curation.html" /><link rel="prev" title="Spyglass tutorial 0" href="0_intro.html" />

    <link rel="shortcut icon" href="../../_static/lorenLabImage.png"/><!-- Generated with Sphinx 6.1.3 and Furo 2023.03.27 -->
        <title>Spyglass Spike Sorting Tutorial - Spyglass 0.3.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/datajoint_header.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Spyglass 0.3.4 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/spyglass.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Spyglass 0.3.4 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../tutorials.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0_intro.html">Introduction</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Spike Sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_curation.html">Curation</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_lfp.html">LFP</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_position_info.html">Position Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_linearization.html">Linearization</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_Extract_Mark_indicators.html">Extact Mark Indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_Decoding_with_GPUs_on_the_GPU_cluster.html">GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="8_1D_Clusterless_Decoding.html">1D Clusterless Decoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="9_2D_Clusterless_Decoding.html">2D Clusterless Decoding</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../_autosummary/spyglass.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.cli.html">spyglass.cli</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.cli.cli.html">spyglass.cli.cli</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.html">spyglass.common</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_backup.html">spyglass.common.common_backup</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_backup.CuratedSpikeSortingBackUp.html">spyglass.common.common_backup.CuratedSpikeSortingBackUp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_backup.SpikeSortingBackUp.html">spyglass.common.common_backup.SpikeSortingBackUp</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_behav.html">spyglass.common.common_behav</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_behav.PositionSource.html">spyglass.common.common_behav.PositionSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_behav.RawPosition.html">spyglass.common.common_behav.RawPosition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_behav.StateScriptFile.html">spyglass.common.common_behav.StateScriptFile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_behav.VideoFile.html">spyglass.common.common_behav.VideoFile</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.html">spyglass.common.common_device</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.CameraDevice.html">spyglass.common.common_device.CameraDevice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.DataAcquisitionDevice.html">spyglass.common.common_device.DataAcquisitionDevice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.DataAcquisitionDeviceAmplifier.html">spyglass.common.common_device.DataAcquisitionDeviceAmplifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.DataAcquisitionDeviceSystem.html">spyglass.common.common_device.DataAcquisitionDeviceSystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.Probe.html">spyglass.common.common_device.Probe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_device.ProbeType.html">spyglass.common.common_device.ProbeType</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_dio.html">spyglass.common.common_dio</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_dio.DIOEvents.html">spyglass.common.common_dio.DIOEvents</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.html">spyglass.common.common_ephys</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.Electrode.html">spyglass.common.common_ephys.Electrode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.ElectrodeBrainRegion.html">spyglass.common.common_ephys.ElectrodeBrainRegion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.ElectrodeGroup.html">spyglass.common.common_ephys.ElectrodeGroup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.LFP.html">spyglass.common.common_ephys.LFP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.LFPBand.html">spyglass.common.common_ephys.LFPBand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.LFPBandSelection.html">spyglass.common.common_ephys.LFPBandSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.LFPSelection.html">spyglass.common.common_ephys.LFPSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.Raw.html">spyglass.common.common_ephys.Raw</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ephys.SampleCount.html">spyglass.common.common_ephys.SampleCount</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_filter.html">spyglass.common.common_filter</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_filter.FirFilter.html">spyglass.common.common_filter.FirFilter</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_interval.html">spyglass.common.common_interval</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_interval.IntervalList.html">spyglass.common.common_interval.IntervalList</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_lab.html">spyglass.common.common_lab</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_lab.Institution.html">spyglass.common.common_lab.Institution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_lab.Lab.html">spyglass.common.common_lab.Lab</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_lab.LabMember.html">spyglass.common.common_lab.LabMember</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_lab.LabTeam.html">spyglass.common.common_lab.LabTeam</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_nwbfile.html">spyglass.common.common_nwbfile</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_nwbfile.AnalysisNwbfile.html">spyglass.common.common_nwbfile.AnalysisNwbfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_nwbfile.AnalysisNwbfileKachery.html">spyglass.common.common_nwbfile.AnalysisNwbfileKachery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_nwbfile.Nwbfile.html">spyglass.common.common_nwbfile.Nwbfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_nwbfile.NwbfileKachery.html">spyglass.common.common_nwbfile.NwbfileKachery</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.html">spyglass.common.common_position</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.IntervalLinearizationSelection.html">spyglass.common.common_position.IntervalLinearizationSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.IntervalLinearizedPosition.html">spyglass.common.common_position.IntervalLinearizedPosition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.IntervalPositionInfo.html">spyglass.common.common_position.IntervalPositionInfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.IntervalPositionInfoSelection.html">spyglass.common.common_position.IntervalPositionInfoSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.LinearizationParameters.html">spyglass.common.common_position.LinearizationParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.NodePicker.html">spyglass.common.common_position.NodePicker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.PositionInfoParameters.html">spyglass.common.common_position.PositionInfoParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.PositionVideo.html">spyglass.common.common_position.PositionVideo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.SelectFromCollection.html">spyglass.common.common_position.SelectFromCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_position.TrackGraph.html">spyglass.common.common_position.TrackGraph</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_region.html">spyglass.common.common_region</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_region.BrainRegion.html">spyglass.common.common_region.BrainRegion</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ripple.html">spyglass.common.common_ripple</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ripple.RippleLFPSelection.html">spyglass.common.common_ripple.RippleLFPSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ripple.RippleParameters.html">spyglass.common.common_ripple.RippleParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_ripple.RippleTimes.html">spyglass.common.common_ripple.RippleTimes</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_sensors.html">spyglass.common.common_sensors</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_sensors.SensorData.html">spyglass.common.common_sensors.SensorData</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_session.html">spyglass.common.common_session</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_session.Session.html">spyglass.common.common_session.Session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_session.SessionGroup.html">spyglass.common.common_session.SessionGroup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_session.SessionGroupSession.html">spyglass.common.common_session.SessionGroupSession</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_subject.html">spyglass.common.common_subject</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_subject.Subject.html">spyglass.common.common_subject.Subject</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.common_task.html">spyglass.common.common_task</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_task.Task.html">spyglass.common.common_task.Task</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.common_task.TaskEpoch.html">spyglass.common.common_task.TaskEpoch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.common.errors.html">spyglass.common.errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.common.populate_all_common.html">spyglass.common.populate_all_common</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.common.prepopulate.html">spyglass.common.prepopulate</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.common.prepopulate.prepopulate.html">spyglass.common.prepopulate.prepopulate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.common.signal_processing.html">spyglass.common.signal_processing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.data_import.html">spyglass.data_import</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.data_import.insert_sessions.html">spyglass.data_import.insert_sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.data_import.storage_dirs.html">spyglass.data_import.storage_dirs</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.decoding.html">spyglass.decoding</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.html">spyglass.decoding.clusterless</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.ClusterlessClassifierParameters.html">spyglass.decoding.clusterless.ClusterlessClassifierParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.MarkParameters.html">spyglass.decoding.clusterless.MarkParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.MultiunitFiringRate.html">spyglass.decoding.clusterless.MultiunitFiringRate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.MultiunitHighSynchronyEvents.html">spyglass.decoding.clusterless.MultiunitHighSynchronyEvents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.MultiunitHighSynchronyEventsParameters.html">spyglass.decoding.clusterless.MultiunitHighSynchronyEventsParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.UnitMarkParameters.html">spyglass.decoding.clusterless.UnitMarkParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.UnitMarks.html">spyglass.decoding.clusterless.UnitMarks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.UnitMarksIndicator.html">spyglass.decoding.clusterless.UnitMarksIndicator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.clusterless.UnitMarksIndicatorSelection.html">spyglass.decoding.clusterless.UnitMarksIndicatorSelection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.decoding.core.html">spyglass.decoding.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.decoding.dj_decoder_conversion.html">spyglass.decoding.dj_decoder_conversion</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.decoding.sorted_spikes.html">spyglass.decoding.sorted_spikes</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.sorted_spikes.SortedSpikesClassifierParameters.html">spyglass.decoding.sorted_spikes.SortedSpikesClassifierParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.sorted_spikes.SortedSpikesIndicator.html">spyglass.decoding.sorted_spikes.SortedSpikesIndicator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.decoding.sorted_spikes.SortedSpikesIndicatorSelection.html">spyglass.decoding.sorted_spikes.SortedSpikesIndicatorSelection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.decoding.visualization.html">spyglass.decoding.visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.decoding.visualization_1D_view.html">spyglass.decoding.visualization_1D_view</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.decoding.visualization_2D_view.html">spyglass.decoding.visualization_2D_view</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../_autosummary/spyglass.settings.html">spyglass.settings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.sharing.html">spyglass.sharing</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.sharing.sharing_kachery.html">spyglass.sharing.sharing_kachery</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.sharing.sharing_kachery.AnalysisNwbfileKachery.html">spyglass.sharing.sharing_kachery.AnalysisNwbfileKachery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.sharing.sharing_kachery.AnalysisNwbfileKacherySelection.html">spyglass.sharing.sharing_kachery.AnalysisNwbfileKacherySelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.sharing.sharing_kachery.KacherySharingGroup.html">spyglass.sharing.sharing_kachery.KacherySharingGroup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.sharing.sharing_kachery.NwbfileKachery.html">spyglass.sharing.sharing_kachery.NwbfileKachery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.sharing.sharing_kachery.NwbfileKacherySelection.html">spyglass.sharing.sharing_kachery.NwbfileKacherySelection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.html">spyglass.spikesorting</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.curation_figurl.html">spyglass.spikesorting.curation_figurl</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.curation_figurl.CurationFigurl.html">spyglass.spikesorting.curation_figurl.CurationFigurl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.curation_figurl.CurationFigurlSelection.html">spyglass.spikesorting.curation_figurl.CurationFigurlSelection</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.merged_sorting_extractor.html">spyglass.spikesorting.merged_sorting_extractor</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.merged_sorting_extractor.MergedSortingExtractor.html">spyglass.spikesorting.merged_sorting_extractor.MergedSortingExtractor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.merged_sorting_extractor.MergedSortingSegment.html">spyglass.spikesorting.merged_sorting_extractor.MergedSortingSegment</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.sortingview.html">spyglass.spikesorting.sortingview</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.sortingview.SortingviewWorkspace.html">spyglass.spikesorting.sortingview.SortingviewWorkspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.sortingview.SortingviewWorkspaceSelection.html">spyglass.spikesorting.sortingview.SortingviewWorkspaceSelection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.sortingview_helper_fn.html">spyglass.spikesorting.sortingview_helper_fn</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_artifact.html">spyglass.spikesorting.spikesorting_artifact</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_artifact.ArtifactDetection.html">spyglass.spikesorting.spikesorting_artifact.ArtifactDetection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_artifact.ArtifactDetectionParameters.html">spyglass.spikesorting.spikesorting_artifact.ArtifactDetectionParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_artifact.ArtifactDetectionSelection.html">spyglass.spikesorting.spikesorting_artifact.ArtifactDetectionSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_artifact.ArtifactRemovedIntervalList.html">spyglass.spikesorting.spikesorting_artifact.ArtifactRemovedIntervalList</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.html">spyglass.spikesorting.spikesorting_curation</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.AutomaticCuration.html">spyglass.spikesorting.spikesorting_curation.AutomaticCuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.AutomaticCurationParameters.html">spyglass.spikesorting.spikesorting_curation.AutomaticCurationParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.AutomaticCurationSelection.html">spyglass.spikesorting.spikesorting_curation.AutomaticCurationSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.CuratedSpikeSorting.html">spyglass.spikesorting.spikesorting_curation.CuratedSpikeSorting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.CuratedSpikeSortingSelection.html">spyglass.spikesorting.spikesorting_curation.CuratedSpikeSortingSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.Curation.html">spyglass.spikesorting.spikesorting_curation.Curation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.MetricParameters.html">spyglass.spikesorting.spikesorting_curation.MetricParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.MetricSelection.html">spyglass.spikesorting.spikesorting_curation.MetricSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.QualityMetrics.html">spyglass.spikesorting.spikesorting_curation.QualityMetrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.UnitInclusionParameters.html">spyglass.spikesorting.spikesorting_curation.UnitInclusionParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.WaveformParameters.html">spyglass.spikesorting.spikesorting_curation.WaveformParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.WaveformSelection.html">spyglass.spikesorting.spikesorting_curation.WaveformSelection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_curation.Waveforms.html">spyglass.spikesorting.spikesorting_curation.Waveforms</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_recording.html">spyglass.spikesorting.spikesorting_recording</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_recording.SortGroup.html">spyglass.spikesorting.spikesorting_recording.SortGroup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_recording.SortInterval.html">spyglass.spikesorting.spikesorting_recording.SortInterval</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_recording.SpikeSortingPreprocessingParameters.html">spyglass.spikesorting.spikesorting_recording.SpikeSortingPreprocessingParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_recording.SpikeSortingRecording.html">spyglass.spikesorting.spikesorting_recording.SpikeSortingRecording</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_recording.SpikeSortingRecordingSelection.html">spyglass.spikesorting.spikesorting_recording.SpikeSortingRecordingSelection</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_sorting.html">spyglass.spikesorting.spikesorting_sorting</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_sorting.SpikeSorterParameters.html">spyglass.spikesorting.spikesorting_sorting.SpikeSorterParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_sorting.SpikeSorting.html">spyglass.spikesorting.spikesorting_sorting.SpikeSorting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_autosummary/spyglass.spikesorting.spikesorting_sorting.SpikeSortingSelection.html">spyglass.spikesorting.spikesorting_sorting.SpikeSortingSelection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.utils.html">spyglass.utils</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.utils.dj_helper_fn.html">spyglass.utils.dj_helper_fn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.utils.nwb_helper_fn.html">spyglass.utils.nwb_helper_fn</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to_contribute.html">How to Contribute</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../misc.html">Miscellaneous</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../figurl_views.html">Figurl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../session_groups.html">Session Groups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="Spyglass-Spike-Sorting-Tutorial">
<h1>Spyglass Spike Sorting Tutorial<a class="headerlink" href="#Spyglass-Spike-Sorting-Tutorial" title="Permalink to this heading">#</a></h1>
<p><strong>Note: make a copy of this notebook and run the copy to avoid git conflicts in the future</strong></p>
<p>This is the second in a multi-part tutorial on the Spyglass pipeline used in Loren Frank’s lab, UCSF. It demonstrates how to run spike sorting and curate units within the pipeline.</p>
<p>If you have not done <a class="reference internal" href="0_intro.html"><span class="doc">tutorial 0</span></a> yet, make sure to do so before proceeding. It is also recommended that you complete the <a class="reference external" href="https://tutorials.datajoint.io/">datajoint tutorials</a> before starting this.</p>
<p><strong>Note 2: Make sure you are running this within the spyglass Conda environment)</strong></p>
<section id="Spike-Sorting-Overview---With-associated-tables">
<h2>Spike Sorting Overview - With associated tables<a class="headerlink" href="#Spike-Sorting-Overview---With-associated-tables" title="Permalink to this heading">#</a></h2>
<section id="Extracting-the-recording-from-the-NWB-file">
<h3><a class="reference external" href="#section1">Extracting the recording from the NWB file</a><a class="headerlink" href="#Extracting-the-recording-from-the-NWB-file" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Specifying your <a class="reference external" href="#Specifying-your-NWB-filename">NWB</a> file.</p></li>
<li><p>Specifying which electrodes involved in the recording to sort data from. - <code class="docutils literal notranslate"><span class="pre">`SortGroup</span></code> &lt;#SortGroup&gt;`__</p></li>
<li><p>Specifying the time segment of the recording we want to sort. - <code class="docutils literal notranslate"><span class="pre">`IntervalList</span></code> &lt;#IntervalList&gt;`__, <code class="docutils literal notranslate"><span class="pre">`SortInterval</span></code> &lt;#SortInterval&gt;`__</p></li>
<li><p>Specifying the parameters to use for filtering the recording. - <code class="docutils literal notranslate"><span class="pre">`SpikeSortingPreprocessingParameters</span></code> &lt;#SpikeSortingPreprocessingParameters&gt;`__</p></li>
<li><p>Combining these parameters. - <code class="docutils literal notranslate"><span class="pre">`SpikeSortingRecordingSelection</span></code> &lt;#SpikeSortingRecordingSelection&gt;`__</p></li>
<li><p>Extracting the recording. - <code class="docutils literal notranslate"><span class="pre">`SpikeSortingRecording</span></code> &lt;#SpikeSortingRecording&gt;`__</p></li>
<li><p>Specifying the parameters to apply for artifact detection/removal. -<code class="docutils literal notranslate"><span class="pre">`ArtifactDetectionParameters</span></code> &lt;#ArtifactDetectionParameters&gt;`__</p></li>
</ol>
</section>
<section id="Spike-sorting-the-extracted-recording">
<h3><a class="reference external" href="#section2">Spike sorting the extracted recording</a><a class="headerlink" href="#Spike-sorting-the-extracted-recording" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Specify the spike sorter and parameters to use. - <code class="docutils literal notranslate"><span class="pre">`SpikeSorterParameters</span></code> &lt;#SpikeSorterParameters&gt;`__</p></li>
<li><p>Combine these parameters. - <code class="docutils literal notranslate"><span class="pre">`SpikeSortingSelection</span></code> &lt;#SpikeSortingSelection&gt;`__</p></li>
<li><p>Spike sort the extracted recording according to chose parameter set. - <code class="docutils literal notranslate"><span class="pre">`SpikeSorting</span></code> &lt;#SpikeSorting&gt;`__</p></li>
</ol>
<p>Let’s start by importing tables from spyglass along with some other useful packages</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">datajoint</span> <span class="k">as</span> <span class="nn">dj</span>
<span class="kn">import</span> <span class="nn">spyglass</span> <span class="k">as</span> <span class="nn">sg</span>
<span class="kn">import</span> <span class="nn">spyglass.common</span> <span class="k">as</span> <span class="nn">sgc</span>
<span class="kn">import</span> <span class="nn">spyglass.spikesorting</span> <span class="k">as</span> <span class="nn">sgss</span>

<span class="c1"># ignore datajoint+jupyter async warnings</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">ResourceWarning</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Now let’s make sure that you’re a part of the LorenLab <code class="docutils literal notranslate"><span class="pre">LabTeam</span></code>, so you’ll have the right permissions for this tutorial.Replace <code class="docutils literal notranslate"><span class="pre">your_name</span></code>, <code class="docutils literal notranslate"><span class="pre">your_email</span></code>, and <code class="docutils literal notranslate"><span class="pre">datajoint_username</span></code>, with your information.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">your_name</span> <span class="o">=</span> <span class="s2">&quot;FirstName LastName&quot;</span>
<span class="n">your_email</span> <span class="o">=</span> <span class="s2">&quot;gmail@gmail.com&quot;</span>
<span class="n">datajoint_username</span> <span class="o">=</span> <span class="s2">&quot;user&quot;</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lorenlab_team_members</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">LabTeam</span><span class="p">()</span><span class="o">.</span><span class="n">LabTeamMember</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;team_name&quot;</span><span class="p">:</span> <span class="s2">&quot;LorenLab&quot;</span><span class="p">})</span>
    <span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;lab_member_name&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabMember</span><span class="o">.</span><span class="n">insert_from_name</span><span class="p">(</span><span class="n">your_name</span><span class="p">)</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabMember</span><span class="o">.</span><span class="n">LabMemberInfo</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span>
    <span class="p">[</span><span class="n">your_name</span><span class="p">,</span> <span class="n">your_email</span><span class="p">,</span> <span class="n">datajoint_username</span><span class="p">],</span> <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabTeam</span><span class="o">.</span><span class="n">LabTeamMember</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span>
    <span class="p">{</span><span class="s2">&quot;team_name&quot;</span><span class="p">:</span> <span class="s2">&quot;LorenLab&quot;</span><span class="p">,</span> <span class="s2">&quot;lab_member_name&quot;</span><span class="p">:</span> <span class="n">your_name</span><span class="p">},</span> <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Now try and use the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> command and the example above to complete the code below and query the <code class="docutils literal notranslate"><span class="pre">LabTeam</span></code> table to double-check that you are a part of the <code class="docutils literal notranslate"><span class="pre">LorenLab</span></code> team.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">your_name</span> <span class="ow">in</span> <span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">LabTeam</span><span class="o">.</span><span class="n">_____</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">{</span><span class="n">___</span><span class="p">:</span> <span class="n">____</span><span class="p">})</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">______</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You made it in!&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="Specifying-your-NWB-filename">
<h3>Specifying your NWB filename<a class="headerlink" href="#Specifying-your-NWB-filename" title="Permalink to this heading">#</a></h3>
<p>NWB filenames take the form of an animal name plus the date of the recording.For this tutorial, we will use the nwb file <code class="docutils literal notranslate"><span class="pre">'montague20200802_tutorial_.nwb'</span></code>. The animal name is <code class="docutils literal notranslate"><span class="pre">montague</span></code> and the date of the recording is <code class="docutils literal notranslate"><span class="pre">20200802</span></code>, the <code class="docutils literal notranslate"><span class="pre">tutorial</span></code> is unique to this setting :-).We’ll first re-insert the NWB file that you deleted at the end of <code class="docutils literal notranslate"><span class="pre">0_intro</span></code>. This file may already be in the table, in which case there will be a warning, that’s ok!<strong>Note</strong>: If you’re not on the Frank Lab
server, this file will be accessible as <code class="docutils literal notranslate"><span class="pre">montague20200802.nwb</span></code> on DANDI through this URL: <strong>insert-url</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spyglass.data_import</span> <span class="k">as</span> <span class="nn">sdi</span>

<span class="n">sdi</span><span class="o">.</span><span class="n">insert_sessions</span><span class="p">(</span><span class="s2">&quot;montague20200802_tutorial.nwb&quot;</span><span class="p">)</span>
<span class="n">nwb_file_name</span> <span class="o">=</span> <span class="s2">&quot;montague20200802_tutorial_.nwb&quot;</span>
<br/></pre></div>
</div>
</div>
</section>
</section>
<section id="NOTE:-This-is-a-common-file-for-this-tutorial,-table-entries-may-change-during-use-if-others-are-also-working-through.">
<h2><strong>NOTE</strong>: This is a common file for this tutorial, table entries may change during use if others are also working through.<a class="headerlink" href="#NOTE:-This-is-a-common-file-for-this-tutorial,-table-entries-may-change-during-use-if-others-are-also-working-through." title="Permalink to this heading">#</a></h2>
</section>
<section id="id1">
<h2>Extracting the recording from the NWB file<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
</section>
<section id="SortGroup">
<h2><code class="docutils literal notranslate"><span class="pre">SortGroup</span></code><a class="headerlink" href="#SortGroup" title="Permalink to this heading">#</a></h2>
<p>For each NWB file there will be multiple electrodes available to sort spikes from.We commonly sort over multiple electrodes at a time, also referred to as a <code class="docutils literal notranslate"><span class="pre">SortGroup</span></code>.This is accomplished by grouping electrodes according to what tetrode or shank of a probe they were on.<strong>NOTE</strong>: answer ‘yes’ when prompted</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># answer &#39;yes&#39; when prompted</span>
<span class="n">sgss</span><span class="o">.</span><span class="n">SortGroup</span><span class="p">()</span><span class="o">.</span><span class="n">set_group_by_shank</span><span class="p">(</span><span class="n">nwb_file_name</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Each electrode will have an <code class="docutils literal notranslate"><span class="pre">electrode_id</span></code> and be associated with an <code class="docutils literal notranslate"><span class="pre">electrode_group_name</span></code>, which will correspond with a <code class="docutils literal notranslate"><span class="pre">sort_group_id</span></code>. In this case, the data was recorded from a 32 tetrode (128 channel) drive, and thus results in 128 unique <code class="docutils literal notranslate"><span class="pre">electrode_id</span></code>, 32 unique <code class="docutils literal notranslate"><span class="pre">electrode_group_name</span></code>, and 32 unique <code class="docutils literal notranslate"><span class="pre">sort_group_id</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SortGroup</span><span class="o">.</span><span class="n">SortGroupElectrode</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="IntervalList">
<h2><code class="docutils literal notranslate"><span class="pre">IntervalList</span></code><a class="headerlink" href="#IntervalList" title="Permalink to this heading">#</a></h2>
<p>Next, we make a decision about the time interval for our spike sorting. Let’s re-examine <code class="docutils literal notranslate"><span class="pre">IntervalList</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">IntervalList</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p>For our example, let’s choose to start with the first run interval (<code class="docutils literal notranslate"><span class="pre">02_r1</span></code>) as our sort interval. We first fetch <code class="docutils literal notranslate"><span class="pre">valid_times</span></code> for this interval.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">interval_list_name</span> <span class="o">=</span> <span class="s2">&quot;02_r1&quot;</span>
<span class="n">interval_list</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sgc</span><span class="o">.</span><span class="n">IntervalList</span>
    <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">,</span> <span class="s2">&quot;interval_list_name&quot;</span><span class="p">:</span> <span class="n">interval_list_name</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;valid_times&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;IntervalList begins as a </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">interval_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">interval_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2"> min long epoch&quot;</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="SortInterval">
<h2><code class="docutils literal notranslate"><span class="pre">SortInterval</span></code><a class="headerlink" href="#SortInterval" title="Permalink to this heading">#</a></h2>
<p>For brevity’s sake, we’ll select only the first 180 seconds of that 90 minute epoch as our sort interval. To do so, we define our new sort interval as the start time of <code class="docutils literal notranslate"><span class="pre">interval_list</span></code> from the previous cell, plus 180 seconds.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sort_interval</span> <span class="o">=</span> <span class="n">interval_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sort_interval_name</span> <span class="o">=</span> <span class="n">interval_list_name</span> <span class="o">+</span> <span class="s2">&quot;_first180&quot;</span>
<span class="n">sort_interval</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">interval_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sort_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sort_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">180</span>
<br/></pre></div>
</div>
</div>
<p>We can now add this <code class="docutils literal notranslate"><span class="pre">sort_interval</span></code> with the specified <code class="docutils literal notranslate"><span class="pre">sort_interval_name</span></code> <code class="docutils literal notranslate"><span class="pre">'02_r1_first180'</span></code> to the <code class="docutils literal notranslate"><span class="pre">SortInterval</span></code> table. The <code class="docutils literal notranslate"><span class="pre">SortInterval.insert()</span></code> function requires the arguments input as a dictionary with keys <code class="docutils literal notranslate"><span class="pre">nwb_file_name</span></code>, <code class="docutils literal notranslate"><span class="pre">sort_interval_name</span></code>, and <code class="docutils literal notranslate"><span class="pre">sort_interval</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SortInterval</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">,</span>
        <span class="s2">&quot;sort_interval_name&quot;</span><span class="p">:</span> <span class="n">sort_interval_name</span><span class="p">,</span>
        <span class="s2">&quot;sort_interval&quot;</span><span class="p">:</span> <span class="n">sort_interval</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Now that we’ve inserted the entry into <code class="docutils literal notranslate"><span class="pre">SortInterval</span></code> you can see that entry by querying <code class="docutils literal notranslate"><span class="pre">SortInterval</span></code> using the <code class="docutils literal notranslate"><span class="pre">nwb_file_name</span></code> and <code class="docutils literal notranslate"><span class="pre">sort_interval_name</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SortInterval</span> <span class="o">&amp;</span> <span class="p">{</span>
    <span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">,</span>
    <span class="s2">&quot;sort_interval_name&quot;</span><span class="p">:</span> <span class="n">sort_interval_name</span><span class="p">,</span>
<span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p>Now using the <code class="docutils literal notranslate"><span class="pre">.fetch()</span></code> command, you can retrieve your user-defined sort interval from the <code class="docutils literal notranslate"><span class="pre">SortInterval</span></code> table.A quick double-check will show that it is indeed a 180 second segment.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fetched_sort_interval</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sgss</span><span class="o">.</span><span class="n">SortInterval</span>
    <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">,</span> <span class="s2">&quot;sort_interval_name&quot;</span><span class="p">:</span> <span class="n">sort_interval_name</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;sort_interval&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;The sort interval goes from </span><span class="si">{</span><span class="n">fetched_sort_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">fetched_sort_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">which is </span><span class="si">{</span><span class="p">(</span><span class="n">fetched_sort_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fetched_sort_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2"> seconds. COOL!&quot;</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="SpikeSortingPreprocessingParameters">
<h2><code class="docutils literal notranslate"><span class="pre">SpikeSortingPreprocessingParameters</span></code><a class="headerlink" href="#SpikeSortingPreprocessingParameters" title="Permalink to this heading">#</a></h2>
<p>Let’s first take a look at the <code class="docutils literal notranslate"><span class="pre">SpikeSortingPreprocessingParameters</span></code> table, which contains the parameters used to filter the recorded data in the spike band prior to spike sorting it.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingPreprocessingParameters</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<p>Now let’s set the filtering parameters. Here we insert the default parameters, and then fetch the default parameter dictionary.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingPreprocessingParameters</span><span class="p">()</span><span class="o">.</span><span class="n">insert_default</span><span class="p">()</span>
<span class="n">preproc_params</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingPreprocessingParameters</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;preproc_params_name&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;preproc_params&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">preproc_params</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Lets first adjust the <code class="docutils literal notranslate"><span class="pre">frequency_min</span></code> parameter to 600, which is the preference for hippocampal data. Now we can insert that into <code class="docutils literal notranslate"><span class="pre">SpikeSortingPreprocessingParameters</span></code> as a new set of filtering parameters for hippocampal data, named <code class="docutils literal notranslate"><span class="pre">'franklab_default_hippocampus'</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">preproc_params</span><span class="p">[</span><span class="s2">&quot;frequency_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingPreprocessingParameters</span><span class="p">()</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;preproc_params_name&quot;</span><span class="p">:</span> <span class="s2">&quot;franklab_default_hippocampus&quot;</span><span class="p">,</span>
        <span class="s2">&quot;preproc_params&quot;</span><span class="p">:</span> <span class="n">preproc_params</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<section id="Setting-a-key">
<h3>Setting a key<a class="headerlink" href="#Setting-a-key" title="Permalink to this heading">#</a></h3>
<p>Now we set up the parameters of the recording we are interested in, and make a dictionary to hold all these values, which will make querying and inserting into tables all the easier moving forward.We’ll assign this to <code class="docutils literal notranslate"><span class="pre">ssr_key</span></code> as these values are relvant to the recording we’ll use to spike sort, also referred to as the spike sorting recording <strong>(ssr)</strong> :-)The <code class="docutils literal notranslate"><span class="pre">sort_group_id</span></code> refers back to the <code class="docutils literal notranslate"><span class="pre">SortGroup</span></code> table we populated at the beginning of the tutorial. We’ll use <code class="docutils literal notranslate"><span class="pre">sort_group_id</span></code> 10
here. Our <code class="docutils literal notranslate"><span class="pre">sort_interval_name</span></code> is the same as above: <code class="docutils literal notranslate"><span class="pre">'02_r1_first600'</span></code>.Our <code class="docutils literal notranslate"><span class="pre">preproc_params_name</span></code> is the same ones we just inserted into <code class="docutils literal notranslate"><span class="pre">SpikeSortingPreprocessingParameters</span></code>.The <code class="docutils literal notranslate"><span class="pre">interval_list</span></code> was also set above as <code class="docutils literal notranslate"><span class="pre">'02_r1'</span></code>. Unlike <code class="docutils literal notranslate"><span class="pre">sort_interval_name</span></code>, which reflects our subsection of the recording, we keep <code class="docutils literal notranslate"><span class="pre">interval_list</span></code> unchanged from the original epoch name.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">key</span><span class="p">[</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nwb_file_name</span>
<span class="n">key</span><span class="p">[</span><span class="s2">&quot;sort_group_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">key</span><span class="p">[</span><span class="s2">&quot;sort_interval_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;02_r1_first180&quot;</span>
<span class="n">key</span><span class="p">[</span><span class="s2">&quot;preproc_params_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;franklab_default_hippocampus&quot;</span>
<span class="n">key</span><span class="p">[</span><span class="s2">&quot;interval_list_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;02_r1&quot;</span>
<span class="n">key</span><span class="p">[</span><span class="s2">&quot;team_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;LorenLab&quot;</span>

<span class="n">ssr_key</span> <span class="o">=</span> <span class="n">key</span>
<br/></pre></div>
</div>
</div>
</section>
</section>
<section id="SpikeSortingRecordingSelection">
<h2><code class="docutils literal notranslate"><span class="pre">SpikeSortingRecordingSelection</span></code><a class="headerlink" href="#SpikeSortingRecordingSelection" title="Permalink to this heading">#</a></h2>
<p>We now insert all of these parameters into the <code class="docutils literal notranslate"><span class="pre">SpikeSortingRecordingSelection</span></code> table, which we will use to specify what time/tetrode/etc of the recording we want to extract.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingRecordingSelection</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span><span class="n">ssr_key</span><span class="p">,</span> <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingRecordingSelection</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">ssr_key</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="SpikeSortingRecording">
<h2><code class="docutils literal notranslate"><span class="pre">SpikeSortingRecording</span></code><a class="headerlink" href="#SpikeSortingRecording" title="Permalink to this heading">#</a></h2>
<p>And now we’re ready to extract the recording! We use the <code class="docutils literal notranslate"><span class="pre">.proj()</span></code> command to pass along all of the primary keys from the <code class="docutils literal notranslate"><span class="pre">SpikeSortingRecordingSelection</span></code> table to the <code class="docutils literal notranslate"><span class="pre">SpikeSortingRecording</span></code> table, so it knows exactly what to extract.<strong>Note</strong>: This step might take a bit with longer duration sort intervals</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingRecording</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span>
    <span class="p">[(</span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingRecordingSelection</span> <span class="o">&amp;</span> <span class="n">ssr_key</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">()]</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<section id="Now-we-can-see-our-recording-in-the-table.-E-x-c-i-t-i-n-g-!">
<h3>Now we can see our recording in the table. <em>E x c i t i n g !</em><a class="headerlink" href="#Now-we-can-see-our-recording-in-the-table.-E-x-c-i-t-i-n-g-!" title="Permalink to this heading">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingRecording</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">ssr_key</span>
<br/></pre></div>
</div>
</div>
</section>
</section>
<section id="ArtifactDetectionParameters">
<h2><code class="docutils literal notranslate"><span class="pre">ArtifactDetectionParameters</span></code><a class="headerlink" href="#ArtifactDetectionParameters" title="Permalink to this heading">#</a></h2>
<p>Similarly, we set up the <code class="docutils literal notranslate"><span class="pre">ArtifactDetectionParameters</span></code>, which can allow us to remove artifacts from the data.Specifically, we want to target artifact signal that is within the frequency band of our filter (600Hz-6KHz), and thus will not get removed by filtering.For the moment we just set up a <code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code> parameter set, which will do nothing when used.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactDetectionParameters</span><span class="p">()</span><span class="o">.</span><span class="n">insert_default</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">artifact_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingRecording</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">ssr_key</span><span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;KEY&quot;</span><span class="p">)</span>
<span class="n">artifact_key</span><span class="p">[</span><span class="s2">&quot;artifact_params_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<br/></pre></div>
</div>
</div>
<p>Now we can pair your choice of artifact detection parameters (as entered into <code class="docutils literal notranslate"><span class="pre">ArtifactParameters</span></code>) with the recording you just extracted through population of <code class="docutils literal notranslate"><span class="pre">SpikeSortingRecording</span></code> and insert into <code class="docutils literal notranslate"><span class="pre">ArtifactDetectionSelection</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactDetectionSelection</span><span class="p">()</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span><span class="n">artifact_key</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactDetectionSelection</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">artifact_key</span>
<br/></pre></div>
</div>
</div>
<p>Now that we’ve inserted into <code class="docutils literal notranslate"><span class="pre">ArtifactDetectionSelection</span></code> we’re ready to populate the <code class="docutils literal notranslate"><span class="pre">ArtifactDetection</span></code> table, which will find periods where there are artifacts (as specified by your parameters) in the recording.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactDetection</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="n">artifact_key</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Populating <code class="docutils literal notranslate"><span class="pre">ArtifactDetection</span></code> also inserts an entry into <code class="docutils literal notranslate"><span class="pre">ArtifactRemovedIntervalList</span></code>, which stores the interval without detected artifacts.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactRemovedIntervalList</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">artifact_key</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="id2">
<h2>Spike sorting the extracted recording<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
</section>
<section id="SpikeSorterParameters">
<h2><code class="docutils literal notranslate"><span class="pre">SpikeSorterParameters</span></code><a class="headerlink" href="#SpikeSorterParameters" title="Permalink to this heading">#</a></h2>
<p>For our example, we will be using <code class="docutils literal notranslate"><span class="pre">mountainsort4</span></code>. There are already some default parameters in the <code class="docutils literal notranslate"><span class="pre">SpikeSorterParameters</span></code> table we’ll <code class="docutils literal notranslate"><span class="pre">fetch</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSorterParameters</span><span class="p">()</span><span class="o">.</span><span class="n">insert_default</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s look at the default params</span>
<span class="n">sorter_name</span> <span class="o">=</span> <span class="s2">&quot;mountainsort4&quot;</span>
<span class="n">ms4_default_params</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSorterParameters</span>
    <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;sorter&quot;</span><span class="p">:</span> <span class="n">sorter_name</span><span class="p">,</span> <span class="s2">&quot;sorter_params_name&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ms4_default_params</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Now we can change these default parameters to line up more closely with our preferences.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">param_dict</span> <span class="o">=</span> <span class="n">ms4_default_params</span><span class="p">[</span><span class="s2">&quot;sorter_params&quot;</span><span class="p">]</span>
<span class="c1"># Detect downward going spikes (1 is for upward, 0 is for both up and down)</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;detect_sign&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="c1"># We will sort electrodes together that are within 100 microns of each other</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;adjacency_radius&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="c1"># Turn filter off since we will filter it prior to starting sort</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;freq_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;freq_max&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># Turn whiten off since we will whiten it prior to starting sort</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;whiten&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># set num_workers to be the same number as the number of electrodes</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;num_workers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="c1"># set clip size as number of samples for 1.33 millisecond based on the sampling rate</span>
<span class="n">param_dict</span><span class="p">[</span><span class="s2">&quot;clip_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">(</span>
    <span class="mf">1.33e-3</span> <span class="o">*</span> <span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">Raw</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_file_name</span><span class="p">})</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;sampling_rate&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">param_dict</span>
<br/></pre></div>
</div>
</div>
<p>Let’s go ahead and insert a new <code class="docutils literal notranslate"><span class="pre">sorter_params_name</span></code> and <code class="docutils literal notranslate"><span class="pre">sorter_params</span></code> dict into the <code class="docutils literal notranslate"><span class="pre">SpikeSorterParameters</span></code> table named <code class="docutils literal notranslate"><span class="pre">franklab_hippocampus_tutorial</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parameter_set_name</span> <span class="o">=</span> <span class="s2">&quot;franklab_hippocampus_tutorial&quot;</span>
<br/></pre></div>
</div>
</div>
<p>Now we insert our parameters for use by the spike sorter into <code class="docutils literal notranslate"><span class="pre">SpikeSorterParameters</span></code> and double-check that it made it in to the table.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSorterParameters</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;sorter&quot;</span><span class="p">:</span> <span class="n">sorter_name</span><span class="p">,</span>
        <span class="s2">&quot;sorter_params_name&quot;</span><span class="p">:</span> <span class="n">parameter_set_name</span><span class="p">,</span>
        <span class="s2">&quot;sorter_params&quot;</span><span class="p">:</span> <span class="n">param_dict</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Check that insert was successful</span>
<span class="n">p</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSorterParameters</span>
    <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;sorter&quot;</span><span class="p">:</span> <span class="n">sorter_name</span><span class="p">,</span> <span class="s2">&quot;sorter_params_name&quot;</span><span class="p">:</span> <span class="n">parameter_set_name</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">()</span>
<span class="n">p</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="SpikeSortingSelection">
<h2><code class="docutils literal notranslate"><span class="pre">SpikeSortingSelection</span></code><a class="headerlink" href="#SpikeSortingSelection" title="Permalink to this heading">#</a></h2>
<p>We now collect all the decisions we made up to here and put it into the <code class="docutils literal notranslate"><span class="pre">SpikeSortingSelection</span></code> table, which is specific to this recording and eventual sorting segment.We’ll add in a few parameters to our key and call it <code class="docutils literal notranslate"><span class="pre">ss_key</span></code>.(<strong>note</strong>: the spike <em>sorter</em> parameters defined above are for the sorter, <code class="docutils literal notranslate"><span class="pre">mountainsort4</span></code> in this case.)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ss_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactDetection</span> <span class="o">&amp;</span> <span class="n">ssr_key</span><span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;KEY&quot;</span><span class="p">)</span>
<span class="n">ss_key</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">sgss</span><span class="o">.</span><span class="n">ArtifactRemovedIntervalList</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;KEY&quot;</span><span class="p">))</span>
<span class="n">ss_key</span><span class="p">[</span><span class="s2">&quot;sorter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sorter_name</span>
<span class="n">ss_key</span><span class="p">[</span><span class="s2">&quot;sorter_params_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_set_name</span>
<span class="k">del</span> <span class="n">ss_key</span><span class="p">[</span><span class="s2">&quot;artifact_params_name&quot;</span><span class="p">]</span>
<span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingSelection</span><span class="o">.</span><span class="n">insert1</span><span class="p">(</span><span class="n">ss_key</span><span class="p">,</span> <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">(</span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingSelection</span> <span class="o">&amp;</span> <span class="n">ss_key</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="SpikeSorting">
<h2><code class="docutils literal notranslate"><span class="pre">SpikeSorting</span></code><a class="headerlink" href="#SpikeSorting" title="Permalink to this heading">#</a></h2>
<p>Now we can run spike sorting. It’s nothing more than populating a table (<code class="docutils literal notranslate"><span class="pre">SpikeSorting</span></code>) based on the entries of <code class="docutils literal notranslate"><span class="pre">SpikeSortingSelection</span></code>.<strong>Note</strong>: This will take a little bit with longer data sets.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSorting</span><span class="o">.</span><span class="n">populate</span><span class="p">([(</span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSortingSelection</span> <span class="o">&amp;</span> <span class="n">ss_key</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">()])</span>
<br/></pre></div>
</div>
</div>
<section id="Check-to-make-sure-the-table-populated">
<h3>Check to make sure the table populated<a class="headerlink" href="#Check-to-make-sure-the-table-populated" title="Permalink to this heading">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgss</span><span class="o">.</span><span class="n">SpikeSorting</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">ss_key</span>
<br/></pre></div>
</div>
</div>
</section>
</section>
<section id="Congratulations,-you've-spike-sorted!-See-2_curation-for-the-next-tutorial">
<h2>Congratulations, you’ve spike sorted! See 2_curation for the next tutorial<a class="headerlink" href="#Congratulations,-you've-spike-sorted!-See-2_curation-for-the-next-tutorial" title="Permalink to this heading">#</a></h2>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="2_curation.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Curation</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="0_intro.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Spyglass tutorial 0</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../../copyright.html">Copyright</a> &#169; 2020 - Present, Loren Frank
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Spyglass Spike Sorting Tutorial</a><ul>
<li><a class="reference internal" href="#Spike-Sorting-Overview---With-associated-tables">Spike Sorting Overview - With associated tables</a><ul>
<li><a class="reference internal" href="#Extracting-the-recording-from-the-NWB-file">Extracting the recording from the NWB file</a></li>
<li><a class="reference internal" href="#Spike-sorting-the-extracted-recording">Spike sorting the extracted recording</a></li>
<li><a class="reference internal" href="#Specifying-your-NWB-filename">Specifying your NWB filename</a></li>
</ul>
</li>
<li><a class="reference internal" href="#NOTE:-This-is-a-common-file-for-this-tutorial,-table-entries-may-change-during-use-if-others-are-also-working-through."><strong>NOTE</strong>: This is a common file for this tutorial, table entries may change during use if others are also working through.</a></li>
<li><a class="reference internal" href="#id1">Extracting the recording from the NWB file</a></li>
<li><a class="reference internal" href="#SortGroup"><code class="docutils literal notranslate"><span class="pre">SortGroup</span></code></a></li>
<li><a class="reference internal" href="#IntervalList"><code class="docutils literal notranslate"><span class="pre">IntervalList</span></code></a></li>
<li><a class="reference internal" href="#SortInterval"><code class="docutils literal notranslate"><span class="pre">SortInterval</span></code></a></li>
<li><a class="reference internal" href="#SpikeSortingPreprocessingParameters"><code class="docutils literal notranslate"><span class="pre">SpikeSortingPreprocessingParameters</span></code></a><ul>
<li><a class="reference internal" href="#Setting-a-key">Setting a key</a></li>
</ul>
</li>
<li><a class="reference internal" href="#SpikeSortingRecordingSelection"><code class="docutils literal notranslate"><span class="pre">SpikeSortingRecordingSelection</span></code></a></li>
<li><a class="reference internal" href="#SpikeSortingRecording"><code class="docutils literal notranslate"><span class="pre">SpikeSortingRecording</span></code></a><ul>
<li><a class="reference internal" href="#Now-we-can-see-our-recording-in-the-table.-E-x-c-i-t-i-n-g-!">Now we can see our recording in the table. <em>E x c i t i n g !</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#ArtifactDetectionParameters"><code class="docutils literal notranslate"><span class="pre">ArtifactDetectionParameters</span></code></a></li>
<li><a class="reference internal" href="#id2">Spike sorting the extracted recording</a></li>
<li><a class="reference internal" href="#SpikeSorterParameters"><code class="docutils literal notranslate"><span class="pre">SpikeSorterParameters</span></code></a></li>
<li><a class="reference internal" href="#SpikeSortingSelection"><code class="docutils literal notranslate"><span class="pre">SpikeSortingSelection</span></code></a></li>
<li><a class="reference internal" href="#SpikeSorting"><code class="docutils literal notranslate"><span class="pre">SpikeSorting</span></code></a><ul>
<li><a class="reference internal" href="#Check-to-make-sure-the-table-populated">Check to make sure the table populated</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Congratulations,-you've-spike-sorted!-See-2_curation-for-the-next-tutorial">Congratulations, you’ve spike sorted! See 2_curation for the next tutorial</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/text-adjustments.js"></script>
    </body>
</html>